---
title: reduce
date: 2017-01-24 12:17:54
categories:
  - å†å²
  - ES6
tags:
- reduce
---
## æ¦‚è¿°
`reduce() `æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸º`ç´¯åŠ å™¨ï¼ˆaccumulatorï¼‰`ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå€¼ï¼ˆä»å·¦åˆ°å³ï¼‰å¼€å§‹`åˆå¹¶`ï¼Œæœ€ç»ˆä¸º`ä¸€ä¸ªå€¼`ã€‚
## è¯­æ³•
```bash
arr.reduce(callback,[initialValue])
```
- `callback`
æ‰§è¡Œæ•°ç»„ä¸­æ¯ä¸ªå€¼çš„å‡½æ•°ï¼ŒåŒ…å«å››ä¸ªå‚æ•°
  - `previousValue`
ä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒè¿”å›çš„å€¼ï¼Œæˆ–è€…æ˜¯æä¾›çš„åˆå§‹å€¼ï¼ˆinitialValueï¼‰
  - `currentValue`
æ•°ç»„ä¸­å½“å‰è¢«å¤„ç†çš„å…ƒç´ 
  - `index`
å½“å‰å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•
  - `array`
è°ƒç”¨ reduce çš„æ•°ç»„
- `initialValue`
ä½œä¸º`ç¬¬ä¸€æ¬¡`è°ƒç”¨ callback çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚

## æè¿°
> `reduce` ä¸ºæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¾æ¬¡æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œä¸åŒ…æ‹¬æ•°ç»„ä¸­è¢«åˆ é™¤æˆ–ä»æœªè¢«èµ‹å€¼çš„å…ƒç´ ï¼Œæ¥å—å››ä¸ªå‚æ•°ï¼š`åˆå§‹å€¼`ï¼ˆ`æˆ–è€…ä¸Šä¸€æ¬¡å›è°ƒå‡½æ•°çš„è¿”å›å€¼`ï¼‰ï¼Œ`å½“å‰å…ƒç´ å€¼`ï¼Œ`å½“å‰ç´¢å¼•`ï¼Œ`è°ƒç”¨ reduce çš„æ•°ç»„`ã€‚

> å›è°ƒå‡½æ•°ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ï¼Œ`previousValue` å’Œ `currentValue` çš„å–å€¼æœ‰ä¸¤ç§æƒ…å†µï¼Œ
- å¦‚æœ initialValue åœ¨è°ƒç”¨ reduce æ—¶è¢«æä¾›ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ª previousValue ç­‰äº initialValue ï¼Œå¹¶ä¸”currentValue ç­‰äºæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå€¼ï¼›
- å¦‚æœinitialValue æœªè¢«æä¾›ï¼Œé‚£ä¹ˆpreviousValue ç­‰äºæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå€¼ï¼ŒcurrentValueç­‰äºæ•°ç»„ä¸­çš„ç¬¬äºŒä¸ªå€¼ã€‚

> å¦‚æœæ•°ç»„ä¸ºç©ºå¹¶ä¸”æ²¡æœ‰æä¾›`initialValue`ï¼Œ ä¼šæŠ›å‡º`TypeError` ã€‚å¦‚æœæ•°ç»„ä»…æœ‰ä¸€ä¸ªå…ƒç´ ï¼ˆæ— è®ºä½ç½®å¦‚ä½•ï¼‰å¹¶ä¸”æ²¡æœ‰æä¾›initialValueï¼Œ æˆ–è€…æœ‰æä¾›initialValueä½†æ˜¯æ•°ç»„ä¸ºç©ºï¼Œé‚£ä¹ˆæ­¤å”¯ä¸€å€¼å°†è¢«è¿”å›å¹¶ä¸”`callbackä¸ä¼šè¢«æ‰§è¡Œ`ã€‚

ğŸŒ°å¦‚ä¸‹ï¼š

```bash
[0,1,2,3,4].reduce(function(previousValue, currentValue, index, array){
  return previousValue + currentValue;
});
```
å›è°ƒè¢«æ‰§è¡Œå››æ¬¡ï¼Œæ¯æ¬¡çš„å‚æ•°å’Œè¿”å›å€¼å¦‚ä¸‹è¡¨ï¼š


  n| previousValue|currentValue|index|array|return value
---|---|---|---|---|---|
first call|0|	1|	1|	[0,1,2,3,4]|	1
second call|1|	2|	2|	[0,1,2,3,4]|	3
third call|3|	3|	3|	[0,1,2,3,4]	|6
fourth call|6|	4|	4	|[0,1,2,3,4]|	10

## æ —å­
- å°†æ‰€æœ‰æ•°å€¼ç›¸åŠ 
```bash
var total = [1,2,3,4,5,6].reduce(function(a,b){
    return a+b;
})
//21
```
- æ•°ç»„æ‰å¹³åŒ–
```bash
var total = [[0,1],[2,3],[4,5]].reduce(function(a,b){
    return a.concat(b);
})
//total = [1,2,3,4,5,6]
```